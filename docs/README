notmuchsync
===========
notmuchsync synchronizes your notmuch tag data base with your maildir flags
(or the other way around). It works for my smallish maildir with around 8k messages, but it might well fail with a big mailstore, as it currently caches all the output with complete mails in RAM for all message finds.
The homepage is at http://spaetz.github.com/notmuchsync/ which contains links to the code repository.

Copyright (C) 2010 Sebastian Spaeth
This program comes with ABSOLUTELY NO WARRANTY. It is released under the GNU GPL v2 (or later).


Usage
=====
See syncscript.example for the script that I use in order to synchronize my IMAP server with notmuch. I also run a periodic "notmuchsync -p" in order to prune old mail files.

Usage:
-p --prune	Prune deleted mails (use --dryrun for no real action)
-s --sync	Sync from notmuch tags to maildir flags.
		By default it will only look for mails from the last 30 days.
		Use --all to look at earlier mails. (probably nonworking for 
                huge maildirs as it reads all mails into RAM)
		Note that if timestamps are more than 30 days in the future,
                we won't handle it.
-r --revsync	Sync tags from maildir to notmuch. See also -s.

Options:
-d		Really verbose debug output.
-q		Log only errors.
-n		Do not call 'notmuch new' before and after operations
--dryrun	Do not really modify notmuch db or mail files. Works with -p -r -s commands.

Maildir flags
=============
At end of filename, flags start with ":2,". New flags may be defined later. Flags must be stored in ASCII order.
 
This one is handled by notmuchsync:
 * "S" (seen): the user has viewed this message.
 * "T" (delete): the user has moved this message to the trash
 * "D" (draft): the user considers this message a draft
 * "F" (flagged): user-defined flag; toggled at user discretion. 

I don't know how to support these:
 * Flag "P" (passed): the user has resent/forwarded/bounced this msg.
 * Flag "R" (replied): the user has replied to this message.
